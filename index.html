<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏û‡∏∞‡πÄ‡∏¢‡∏≤‡∏£‡∏≤‡∏° ‚Ä¢ Google Apps Script (‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á)</title>
  <base target="_top" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <style>
    :root { --brand:#fb923c; --brand-600:#ea580c; }
    body { box-sizing: border-box; }
    .gradient-orange { background: linear-gradient(135deg, #fed7aa, var(--brand)); }
    .sidebar-gradient { background: linear-gradient(180deg, var(--brand), var(--brand-600)); }
    .login-gradient { background: linear-gradient(135deg, var(--brand), var(--brand-600)); }
    .swal2-popup { font-family: 'Sarabun', system-ui, -apple-system, Segoe UI, Roboto, 'Noto Sans Thai', sans-serif !important; }
    #sidebar, #mainContent { transition: all 0.3s ease-in-out; }
    .nav-item { transition: all 0.2s ease; }
    .nav-item:hover { background-color: rgba(255, 255, 255, 0.10); }
    .nav-item.active { background-color: rgba(255, 255, 255, 0.20); }
    .card { transition: transform 0.2s ease, box-shadow 0.2s ease; }
    .card:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(0,0,0,0.10); }
    .loading { display: inline-block; width: 20px; height: 20px; border: 3px solid #f3f3f3; border-top: 3px solid var(--brand); border-radius: 50%; animation: spin 1s linear infinite; }
    @keyframes spin { 0%{transform:rotate(0)} 100%{transform:rotate(360deg)} }
    .page-content { display:none; }
    .page-content.active { display:block; }
  </style>
</head>
<body class="bg-orange-100 font-sans">
  <!-- Login Page -->
  <section id="loginPage" class="min-h-full flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8">
    <div class="max-w-md w-full space-y-8">
      <div class="text-center">
        <h1 class="text-4xl font-bold text-orange-600 mb-2">üçú</h1>
        <h2 class="text-3xl font-bold text-gray-900">‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏û‡∏∞‡πÄ‡∏¢‡∏≤‡∏£‡∏≤‡∏°</h2>
        <p class="mt-2 text-sm text-gray-600">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</p>
      </div>
      <div class="bg-white rounded-lg shadow-lg p-8">
        <form id="loginForm" class="space-y-6" autocomplete="off">
          <div>
            <label for="username" class="block text-sm font-medium text-gray-700 mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</label>
            <input type="text" id="username" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500" required />
          </div>
          <div>
            <label for="password" class="block text-sm font-medium text-gray-700 mb-2">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
            <input type="password" id="password" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500" required />
          </div>
          <button type="submit" class="w-full login-gradient text-white py-3 px-4 rounded-lg hover:opacity-90 transition-opacity font-medium">
            <span id="loginText">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</span>
            <span id="loginLoading" class="loading hidden" aria-hidden="true"></span>
          </button>
        </form>
        <div class="mt-6 p-4 bg-gray-50 rounded-lg">
          <h3 class="font-medium text-gray-700 mb-2">‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ó‡∏î‡∏™‡∏≠‡∏ö:</h3>
          <div class="text-sm text-gray-600 space-y-1">
            <p><strong>Admin:</strong> admin / pyr054411111</p>
            <p><strong>User ‡∏Ç‡∏≤‡∏¢:</strong> user / user123</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Main App -->
  <section id="mainApp" class="flex min-h-screen bg-gray-100 hidden">
    <!-- Sidebar -->
    <aside id="sidebar" class="fixed inset-y-0 left-0 z-30 w-64 sidebar-gradient text-white shadow-lg transform -translate-x-full md:relative md:translate-x-0 flex flex-col">
      <div class="p-6 flex-shrink-0">
        <h1 class="text-xl font-bold mb-4">üçú ‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏û‡∏∞‡πÄ‡∏¢‡∏≤‡∏£‡∏≤‡∏°</h1>
        <div class="mb-6 p-3 bg-orange-600 rounded-lg">
          <p class="text-sm">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ: <span id="currentUser" class="font-medium"></span></p>
          <p class="text-xs opacity-75">‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå: <span id="currentRole" class="font-medium"></span></p>
        </div>
      </div>
      <nav class="flex-1 px-4 space-y-2 overflow-y-auto" id="navigation">
        <a href="#" class="nav-item flex items-center px-4 py-3 rounded-lg active" data-page="dashboard"><span class="mr-3">üìä</span><span>‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î</span></a>
        <a href="#" class="nav-item flex items-center px-4 py-3 rounded-lg admin-only" data-page="orders"><span class="mr-3">üõí</span><span>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</span></a>
        <a href="#" class="nav-item flex items-center px-4 py-3 rounded-lg" data-page="pos"><span class="mr-3">üí∞</span><span>‡∏Ç‡∏≤‡∏¢‡∏≠‡∏≤‡∏´‡∏≤‡∏£</span></a>
        <a href="#" class="nav-item flex items-center px-4 py-3 rounded-lg admin-only" data-page="menu"><span class="mr-3">üçΩÔ∏è</span><span>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏ô‡∏π</span></a>
        <a href="#" class="nav-item flex items-center px-4 py-3 rounded-lg admin-only" data-page="inventory"><span class="mr-3">üì¶</span><span>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏ï‡πá‡∏≠‡∏Å</span></a>
        <a href="#" class="nav-item flex items-center px-4 py-3 rounded-lg admin-only" data-page="reports"><span class="mr-3">üìà</span><span>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</span></a>
      </nav>
      <div class="p-4 border-t border-orange-600">
        <button id="logoutBtn" class="w-full flex items-center justify-center px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg transition-colors">
          <span class="mr-2">üö™</span><span>‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</span>
        </button>
      </div>
    </aside>

    <!-- Mobile menu button -->
    <div class="md:hidden fixed top-4 left-4 z-40">
      <button id="mobileMenuBtn" class="bg-orange-600 text-white p-2 rounded-lg shadow-lg" aria-controls="sidebar" aria-expanded="false" aria-label="Toggle menu">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
      </button>
    </div>

    <!-- Main Content -->
    <main id="mainContent" class="flex-1 flex flex-col overflow-hidden">
      <!-- Dashboard Page -->
      <section id="dashboardPage" class="page-content active flex-1 p-6 overflow-y-auto">
        <div class="mb-6">
          <h2 class="text-2xl font-bold text-gray-800 mb-2">‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î</h2>
          <p class="text-gray-600">‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£</p>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
          <div class="card bg-white rounded-lg shadow-md p-6">
            <div class="flex items-center">
              <div class="p-3 bg-green-100 rounded-full"><span class="text-2xl">üí∞</span></div>
              <div class="ml-4">
                <p class="text-sm text-gray-600">‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</p>
                <p class="text-2xl font-bold text-green-600" id="todaySales">‡∏ø0</p>
              </div>
            </div>
          </div>
          <div class="card bg-white rounded-lg shadow-md p-6">
            <div class="flex items-center">
              <div class="p-3 bg-blue-100 rounded-full"><span class="text-2xl">üõí</span></div>
              <div class="ml-4">
                <p class="text-sm text-gray-600">‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</p>
                <p class="text-2xl font-bold text-blue-600" id="todayOrders">0</p>
              </div>
            </div>
          </div>
          <div class="card bg-white rounded-lg shadow-md p-6">
            <div class="flex items-center">
              <div class="p-3 bg-yellow-100 rounded-full"><span class="text-2xl">‚è≥</span></div>
              <div class="ml-4">
                <p class="text-sm text-gray-600">‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏£‡∏≠</p>
                <p class="text-2xl font-bold text-yellow-600" id="pendingOrders">0</p>
              </div>
            </div>
          </div>
          <div class="card bg-white rounded-lg shadow-md p-6">
            <div class="flex items-center">
              <div class="p-3 bg-purple-100 rounded-full"><span class="text-2xl">üçΩÔ∏è</span></div>
              <div class="ml-4">
                <p class="text-sm text-gray-600">‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
                <p class="text-2xl font-bold text-purple-600" id="totalMenus">0</p>
              </div>
            </div>
          </div>
        </div>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <div class="bg-white rounded-lg shadow-md p-6">
            <h3 class="text-lg font-semibold mb-4">‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô (7 ‡∏ß‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î)</h3>
            <div class="h-64"><canvas id="salesChart"></canvas></div>
          </div>
          <div class="bg-white rounded-lg shadow-md p-6">
            <h3 class="text-lg font-semibold mb-4">‡πÄ‡∏°‡∏ô‡∏π‡∏Ç‡∏≤‡∏¢‡∏î‡∏µ</h3>
            <div class="h-64"><canvas id="popularMenuChart"></canvas></div>
          </div>
        </div>
      </section>

      <!-- POS Page -->
      <section id="posPage" class="page-content flex-1 p-6 overflow-y-auto">
        <div class="mb-6">
          <h2 class="text-2xl font-bold text-gray-800 mb-2">‡∏Ç‡∏≤‡∏¢‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h2>
          <p class="text-gray-600">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡πÉ‡∏ô‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</p>
        </div>
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
          <div class="lg:col-span-2">
            <div class="mb-4">
              <div class="flex flex-wrap gap-2" id="categoryFilters">
                <button class="category-btn bg-orange-600 text-white px-4 py-2 rounded-lg text-sm font-medium" data-category="all">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
                <button class="category-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-300" data-category="‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏à‡∏≤‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß">‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏à‡∏≤‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß</button>
                <button class="category-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-300" data-category="‡πÅ‡∏Å‡∏á/‡∏ï‡πâ‡∏°">‡πÅ‡∏Å‡∏á/‡∏ï‡πâ‡∏°</button>
                <button class="category-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-300" data-category="‡∏¢‡∏≥/‡∏™‡∏•‡∏±‡∏î">‡∏¢‡∏≥/‡∏™‡∏•‡∏±‡∏î</button>
                <button class="category-btn bg-gray-200 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-300" data-category="‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°</button>
              </div>
            </div>
            <div id="posMenuGrid" class="grid grid-cols-2 md:grid-cols-3 gap-4"></div>
          </div>
          <div class="lg:col-span-1">
            <div class="bg-white rounded-lg shadow-md p-6 sticky top-6">
              <h3 class="text-lg font-semibold mb-4">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</h3>
              <div class="mb-4">
                <label for="customerName" class="block text-sm font-medium text-gray-700 mb-1">‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</label>
                <input type="text" id="customerName" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ (‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö)" class="w-full p-2 border border-gray-300 rounded-lg text-sm" />
              </div>
              <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</label>
                <div class="space-y-2">
                  <label class="flex items-center"><input type="radio" name="paymentMethod" value="cash" class="mr-2 text-orange-600 focus:ring-orange-500" checked /><span class="text-sm">üíµ ‡∏ä‡∏≥‡∏£‡∏∞‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î</span></label>
                  <label class="flex items-center"><input type="radio" name="paymentMethod" value="transfer" class="mr-2 text-orange-600 focus:ring-orange-500" /><span class="text-sm">üè¶ ‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</span></label>
                </div>
              </div>
              <div id="cashPaymentSection" class="mb-4 p-3 bg-orange-50 rounded-lg border border-orange-200">
                <label for="cashAmount" class="block text-sm font-medium text-gray-700 mb-2">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö</label>
                <input type="number" id="cashAmount" placeholder="0" class="w-full p-2 border border-gray-300 rounded-lg text-sm mb-3" min="0" step="1" />
                <div class="space-y-2 text-sm">
                  <div class="flex justify-between"><span class="text-gray-600">‡∏¢‡∏≠‡∏î‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ä‡∏≥‡∏£‡∏∞:</span><span id="paymentTotal" class="font-medium">‡∏ø0</span></div>
                  <div class="flex justify-between"><span class="text-gray-600">‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö:</span><span id="cashReceived" class="font-medium">‡∏ø0</span></div>
                  <div class="flex justify-between border-t pt-2"><span class="font-medium">‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏≠‡∏ô:</span><span id="changeAmount" class="font-bold text-green-600">‡∏ø0</span></div>
                </div>
              </div>
              <div id="orderItems" class="space-y-3 mb-4 max-h-60 overflow-y-auto">
                <div class="text-center text-gray-500 py-8"><span class="text-4xl mb-2 block">üõí</span><p class="text-sm">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</p></div>
              </div>
              <div class="border-t pt-4">
                <div class="flex justify-between items-center mb-2"><span class="text-sm text-gray-600">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£:</span><span id="totalItems" class="text-sm font-medium">0</span></div>
                <div class="flex justify-between items-center mb-4"><span class="text-lg font-semibold">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°:</span><span id="totalAmount" class="text-xl font-bold text-orange-600">‡∏ø0</span></div>
                <div class="space-y-2">
                  <button id="clearOrderBtn" class="w-full bg-gray-500 hover:bg-gray-600 text-white py-2 px-4 rounded-lg transition-colors text-sm">üóëÔ∏è ‡∏•‡πâ‡∏≤‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</button>
                  <button id="submitOrderBtn" class="w-full bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-lg transition-colors font-medium disabled:bg-gray-300 disabled:cursor-not-allowed" disabled>‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Orders Page -->
      <section id="ordersPage" class="page-content flex-1 p-6 overflow-y-auto">
        <div class="mb-6 flex justify-between items-center">
          <div>
            <h2 class="text-2xl font-bold text-gray-800 mb-2">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</h2>
            <p class="text-gray-600">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
          </div>
          <button id="addOrderBtn" class="bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-lg transition-colors">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</button>
        </div>
        <div class="bg-white rounded-lg shadow-md p-4 mb-6">
          <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
            <div>
              <label for="orderStatus" class="block text-sm font-medium text-gray-700 mb-1">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</label>
              <select id="orderStatus" class="w-full p-2 border border-gray-300 rounded-lg">
                <option value="">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
                <option value="pending">‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</option>
                <option value="preparing">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°</option>
                <option value="ready">‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ü</option>
                <option value="completed">‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô</option>
              </select>
            </div>
            <div>
              <label for="orderDate" class="block text-sm font-medium text-gray-700 mb-1">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label>
              <input type="date" id="orderDate" class="w-full p-2 border border-gray-300 rounded-lg" />
            </div>
            <div>
              <label for="orderSearch" class="block text-sm font-medium text-gray-700 mb-1">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</label>
              <input type="text" id="orderSearch" placeholder="‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏´‡∏£‡∏∑‡∏≠‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤" class="w-full p-2 border border-gray-300 rounded-lg" />
            </div>
            <div class="flex items-end"><button id="refreshOrdersBtn" class="w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors">üîÑ ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä</button></div>
          </div>
        </div>
        <div class="bg-white rounded-lg shadow-md overflow-hidden">
          <div class="overflow-x-auto">
            <table class="w-full">
              <thead class="bg-gray-50">
                <tr>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">‡πÄ‡∏ß‡∏•‡∏≤</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                </tr>
              </thead>
              <tbody id="ordersTableBody" class="bg-white divide-y divide-gray-200"></tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- Menu Page -->
      <section id="menuPage" class="page-content flex-1 p-6 overflow-y-auto">
        <div class="mb-6 flex justify-between items-center">
          <div>
            <h2 class="text-2xl font-bold text-gray-800 mb-2">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏ô‡∏π</h2>
            <p class="text-gray-600">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
          </div>
          <button id="addMenuBtn" class="bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-lg transition-colors">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π</button>
        </div>
        <div id="menuGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"></div>
      </section>

      <!-- Inventory Page -->
      <section id="inventoryPage" class="page-content flex-1 p-6 overflow-y-auto">
        <div class="mb-6 flex justify-between items-center">
          <div>
            <h2 class="text-2xl font-bold text-gray-800 mb-2">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏ï‡πá‡∏≠‡∏Å</h2>
            <p class="text-gray-600">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡πÅ‡∏•‡∏∞‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</p>
          </div>
          <button id="addInventoryBtn" class="bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-lg transition-colors">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
        </div>
        <div class="bg-white rounded-lg shadow-md overflow-hidden">
          <div class="overflow-x-auto">
            <table class="w-full">
              <thead class="bg-gray-50">
                <tr>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">‡∏´‡∏ô‡πà‡∏ß‡∏¢</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                </tr>
              </thead>
              <tbody id="inventoryTableBody" class="bg-white divide-y divide-gray-200"></tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- Reports Page -->
      <section id="reportsPage" class="page-content flex-1 p-6 overflow-y-auto">
        <div class="mb-6">
          <h2 class="text-2xl font-bold text-gray-800 mb-2">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</h2>
          <p class="text-gray-600">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢</p>
        </div>
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div>
              <label for="reportStartDate" class="block text-sm font-medium text-gray-700 mb-1">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</label>
              <input type="date" id="reportStartDate" class="w-full p-2 border border-gray-300 rounded-lg" />
            </div>
            <div>
              <label for="reportEndDate" class="block text-sm font-medium text-gray-700 mb-1">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î</label>
              <input type="date" id="reportEndDate" class="w-full p-2 border border-gray-300 rounded-lg" />
            </div>
            <div class="flex items-end"><button id="generateReportBtn" class="w-full bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors">üìä ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</button></div>
          </div>
        </div>
        <div id="reportResults" class="space-y-6"></div>
      </section>
    </main>
  </section>

  <script>
    // ===== Utilities =====
    const baht = new Intl.NumberFormat('th-TH');
    const formatBaht = n => `‡∏ø${baht.format(Math.max(0, Math.round(n || 0)))}`;

    // ===== Global State =====
    let currentUser = null;
    let currentRole = null; // 'admin' | 'user'
    let orders = [];
    let menus = [];
    let inventory = [];
    let currentOrder = [];
    let selectedCategory = 'all';

    // Chart instances (to avoid duplicate overlays)
    let charts = { sales: null, popular: null };

    // ===== Google Apps Script Config =====
    const GAS_CONFIG = {
      // ‚ö†Ô∏è ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô Web App URL ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏î‡∏µ‡∏û‡∏•‡∏≠‡∏¢‡∏à‡∏£‡∏¥‡∏á
      webAppUrl: 'https://script.google.com/macros/s/AKfycbydfbBj7rRsmK88kLmRh8jO9icF45jvtxQIRaJrL5S0jqqQ61pjsEg0bY7hvanFfnjAEQ/exec',
      deploymentUrl: 'https://script.google.com/macros/s/AKfycbydfbBj7rRsmK88kLmRh8jO9icF45jvtxQIRaJrL5S0jqqQ61pjsEg0bY7hvanFfnjAEQ/exec'
    };

    // ===== Google Sheets API wrapper =====
    class GoogleSheetsAPI {
      static async callGAS(action, data = {}) {
        try {
          const response = await fetch(GAS_CONFIG.webAppUrl, {
            method: 'POST', headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ action, data })
          });
          if (!response.ok) throw new Error(`HTTP ${response.status}`);
          const result = await response.json();
          return result;
        } catch (error) {
          console.warn('Falling back to mock data for:', action, error);
          return this.getMockData(action, data);
        }
      }

      static getMockData(action, data) {
        switch (action) {
          case 'login':
            if (data.username === 'admin' && data.password === 'pyr054411111') return { success: true, user: { username: 'admin', role: 'admin' } };
            if (data.username === 'user' && data.password === 'user123') return { success: true, user: { username: 'user', role: 'user' } };
            return { success: false, message: '‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á' };
          case 'getDashboardData':
            return { success: true, data: { todaySales: 15420, todayOrders: 28, pendingOrders: 5, totalMenus: 45, salesChart: [2100, 2800, 3200, 2900, 3500, 4100, 3800], popularMenus: ['‡∏ú‡∏±‡∏î‡πÑ‡∏ó‡∏¢','‡∏ï‡πâ‡∏°‡∏¢‡∏≥‡∏Å‡∏∏‡πâ‡∏á','‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î','‡∏™‡πâ‡∏°‡∏ï‡∏≥','‡πÅ‡∏Å‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏´‡∏ß‡∏≤‡∏ô'] } };
          case 'getOrders':
            return { success: true, data: [ { id: 'ORD001', customer: '‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ä‡∏≤‡∏¢', items: '‡∏ú‡∏±‡∏î‡πÑ‡∏ó‡∏¢ x2, ‡∏ï‡πâ‡∏°‡∏¢‡∏≥‡∏Å‡∏∏‡πâ‡∏á x1', total: 280, status: 'pending', time: '14:30' }, { id: 'ORD002', customer: '‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏´‡∏ç‡∏¥‡∏á', items: '‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î x1, ‡∏ô‡πâ‡∏≥‡∏™‡πâ‡∏° x1', total: 120, status: 'preparing', time: '14:25' } ] };
          case 'getMenus':
            return { success: true, data: [ { id:1, name:'‡∏ú‡∏±‡∏î‡πÑ‡∏ó‡∏¢', price:80, category:'‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏à‡∏≤‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß', available:true, image:'üçú' }, { id:2, name:'‡∏ï‡πâ‡∏°‡∏¢‡∏≥‡∏Å‡∏∏‡πâ‡∏á', price:120, category:'‡πÅ‡∏Å‡∏á/‡∏ï‡πâ‡∏°', available:true, image:'üç≤' }, { id:3, name:'‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î', price:60, category:'‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏à‡∏≤‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß', available:true, image:'üçõ' }, { id:4, name:'‡∏™‡πâ‡∏°‡∏ï‡∏≥', price:50, category:'‡∏¢‡∏≥/‡∏™‡∏•‡∏±‡∏î', available:true, image:'ü•ó' }, { id:5, name:'‡πÅ‡∏Å‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏´‡∏ß‡∏≤‡∏ô', price:100, category:'‡πÅ‡∏Å‡∏á/‡∏ï‡πâ‡∏°', available:true, image:'üçõ' }, { id:6, name:'‡∏•‡∏≤‡∏ö‡∏´‡∏°‡∏π', price:70, category:'‡∏¢‡∏≥/‡∏™‡∏•‡∏±‡∏î', available:true, image:'ü•ô' }, { id:7, name:'‡∏Ç‡πâ‡∏≤‡∏ß‡∏ã‡∏≠‡∏¢', price:65, category:'‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏à‡∏≤‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß', available:true, image:'üçú' }, { id:8, name:'‡∏ô‡πâ‡∏≥‡∏™‡πâ‡∏°', price:25, category:'‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°', available:true, image:'üßÉ' }, { id:9, name:'‡∏ô‡πâ‡∏≥‡πÅ‡∏Ç‡πá‡∏á‡πÉ‡∏™', price:20, category:'‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°', available:true, image:'üßä' }, { id:10, name:'‡∏Å‡∏∞‡πÄ‡∏û‡∏£‡∏≤‡∏´‡∏°‡∏π', price:75, category:'‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏à‡∏≤‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß', available:true, image:'üçõ' } ] };
          case 'getInventory':
            return { success: true, data: [ { id:1, name:'‡πÄ‡∏™‡πâ‡∏ô‡∏ú‡∏±‡∏î‡πÑ‡∏ó‡∏¢', unit:'‡∏Å‡∏Å.', current:15, minimum:5, status:'normal' }, { id:2, name:'‡∏Å‡∏∏‡πâ‡∏á‡∏™‡∏î', unit:'‡∏Å‡∏Å.', current:3, minimum:5, status:'low' }, { id:3, name:'‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏û‡∏∑‡∏ä', unit:'‡∏•‡∏¥‡∏ï‡∏£', current:8, minimum:3, status:'normal' } ] };
          default:
            return { success: true, data: {} };
        }
      }

      static login(username, password) { return this.callGAS('login', { username, password }); }
      static getDashboardData() { return this.callGAS('getDashboardData'); }
      static getOrders(filters = {}) { return this.callGAS('getOrders', filters); }
      static addOrder(orderData) { return this.callGAS('addOrder', orderData); }
      static updateOrderStatus(orderId, status) { return this.callGAS('updateOrderStatus', { orderId, status }); }
      static getMenus() { return this.callGAS('getMenus'); }
      static addMenu(menuData) { return this.callGAS('addMenu', menuData); }
      static updateMenu(menuId, menuData) { return this.callGAS('updateMenu', { menuId, ...menuData }); }
      static deleteMenu(menuId) { return this.callGAS('deleteMenu', { menuId }); }
      static getInventory() { return this.callGAS('getInventory'); }
      static addInventoryItem(itemData) { return this.callGAS('addInventoryItem', itemData); }
      static updateInventory(itemId, itemData) { return this.callGAS('updateInventory', { itemId, ...itemData }); }
      static generateReport(startDate, endDate) { return this.callGAS('generateReport', { startDate, endDate }); }
    }

    // ===== Auth =====
    const loginForm = document.getElementById('loginForm');
    loginForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      const username = document.getElementById('username').value.trim();
      const password = document.getElementById('password').value;
      document.getElementById('loginText').classList.add('hidden');
      document.getElementById('loginLoading').classList.remove('hidden');
      try {
        const result = await GoogleSheetsAPI.login(username, password);
        if (result.success) {
          currentUser = result.user.username; currentRole = result.user.role;
          document.getElementById('currentUser').textContent = currentUser;
          document.getElementById('currentRole').textContent = currentRole === 'admin' ? '‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö' : '‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô';
          updateMenuVisibility();
          document.getElementById('loginPage').classList.add('hidden');
          document.getElementById('mainApp').classList.remove('hidden');
          await loadDashboard();
          Swal.fire({ icon:'success', title:'‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', text:`‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö ${currentUser}`, timer:2000, showConfirmButton:false });
        } else {
          Swal.fire({ icon:'error', title:'‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', text: result.message || '‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á' });
        }
      } catch (err) {
        console.error(err);
        Swal.fire({ icon:'error', title:'‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', text:'‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏î‡πâ (‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß)' });
      } finally {
        document.getElementById('loginText').classList.remove('hidden');
        document.getElementById('loginLoading').classList.add('hidden');
      }
    });

    function updateMenuVisibility() {
      const adminOnlyItems = document.querySelectorAll('.admin-only');
      if (currentRole !== 'admin') {
        adminOnlyItems.forEach((el) => el.classList.add('hidden'));
        showPage('pos');
        document.querySelectorAll('.nav-item').forEach((n) => n.classList.remove('active'));
        const posNav = document.querySelector('[data-page="pos"]');
        posNav && posNav.classList.add('active');
      } else {
        adminOnlyItems.forEach((el) => el.classList.remove('hidden'));
      }
    }

    // ===== Navigation =====
    document.getElementById('navigation').addEventListener('click', (e) => {
      const link = e.target.closest('.nav-item');
      if (!link) return;
      e.preventDefault();
      document.querySelectorAll('.nav-item').forEach((n) => n.classList.remove('active'));
      link.classList.add('active');
      showPage(link.dataset.page);
    });

    function showPage(page) {
      document.querySelectorAll('.page-content').forEach((p) => p.classList.remove('active'));
      const section = document.getElementById(`${page}Page`);
      if (section) section.classList.add('active');
      switch (page) {
        case 'dashboard': loadDashboard(); break;
        case 'pos': loadPOS(); break;
        case 'orders': loadOrders(); break;
        case 'menu': loadMenus(); break;
        case 'inventory': loadInventory(); break;
        case 'reports': loadReports(); break;
      }
    }

    // ===== Dashboard =====
    async function loadDashboard() {
      const result = await GoogleSheetsAPI.getDashboardData();
      if (!result.success) return;
      const data = result.data;
      document.getElementById('todaySales').textContent = formatBaht(data.todaySales);
      document.getElementById('todayOrders').textContent = data.todayOrders;
      document.getElementById('pendingOrders').textContent = data.pendingOrders;
      document.getElementById('totalMenus').textContent = data.totalMenus;
      drawSalesChart(data.salesChart);
      drawPopularMenuChart(data.popularMenus);
    }

    function drawSalesChart(data) {
      const ctx = document.getElementById('salesChart').getContext('2d');
      if (charts.sales) { charts.sales.destroy(); charts.sales = null; }
      charts.sales = new Chart(ctx, {
        type: 'line',
        data: { labels: ['‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå','‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£','‡∏û‡∏∏‡∏ò','‡∏û‡∏§‡∏´‡∏±‡∏™','‡∏®‡∏∏‡∏Å‡∏£‡πå','‡πÄ‡∏™‡∏≤‡∏£‡πå','‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå'], datasets: [{ label: '‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢ (‡∏ö‡∏≤‡∏ó)', data, borderColor: '#fb923c', backgroundColor: 'rgba(251,146,60,0.10)', tension: 0.4 }] },
        options: { responsive:true, maintainAspectRatio:false, plugins:{ legend:{ display:true, position:'top' } }, scales:{ y:{ beginAtZero:true } } }
      });
    }

    function drawPopularMenuChart(labels) {
      const ctx = document.getElementById('popularMenuChart').getContext('2d');
      if (charts.popular) { charts.popular.destroy(); charts.popular = null; }
      charts.popular = new Chart(ctx, {
        type: 'doughnut',
        data: { labels, datasets: [{ data: [25,20,18,15,12], backgroundColor: ['#fb923c','#ea580c','#fed7aa','#fdba74','#f97316'] }] },
        options: { responsive:true, maintainAspectRatio:false, plugins:{ legend:{ display:true, position:'bottom' } } }
      });
    }

    // ===== Orders =====
    async function loadOrders() {
      const result = await GoogleSheetsAPI.getOrders();
      if (!result.success) return;
      orders = result.data;
      const tbody = document.getElementById('ordersTableBody');
      tbody.innerHTML = '';
      for (const order of orders) {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${order.id}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${order.customer}</td>
          <td class="px-6 py-4 text-sm text-gray-500">${order.items}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${formatBaht(order.total)}</td>
          <td class="px-6 py-4 whitespace-nowrap">${statusBadge(order.status)}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${order.time}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
            <select class="text-sm border border-gray-300 rounded px-2 py-1" data-id="${order.id}">
              <option value="pending" ${order.status==='pending'?'selected':''}>‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</option>
              <option value="preparing" ${order.status==='preparing'?'selected':''}>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°</option>
              <option value="ready" ${order.status==='ready'?'selected':''}>‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ü</option>
              <option value="completed" ${order.status==='completed'?'selected':''}>‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô</option>
            </select>
          </td>`;
        tbody.appendChild(tr);
      }
      // Delegate change events
      tbody.addEventListener('change', async (e) => {
        const sel = e.target.closest('select');
        if (!sel) return;
        const id = sel.getAttribute('data-id');
        const newStatus = sel.value;
        const result = await GoogleSheetsAPI.updateOrderStatus(id, newStatus);
        if (result.success) {
          Swal.fire({ icon:'success', title:'‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', timer:1500, showConfirmButton:false });
          loadOrders();
        }
      }, { once: true });
    }

    function statusBadge(status) {
      const map = { pending:'bg-yellow-100 text-yellow-800', preparing:'bg-blue-100 text-blue-800', ready:'bg-green-100 text-green-800', completed:'bg-gray-100 text-gray-800' };
      const text = { pending:'‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£', preparing:'‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°', ready:'‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ü', completed:'‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô' }[status] || '‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞';
      const cls = map[status] || 'bg-gray-100 text-gray-800';
      return `<span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${cls}">${text}</span>`;
    }

    // ===== Menu =====
    async function loadMenus() {
      const result = await GoogleSheetsAPI.getMenus();
      if (!result.success) return;
      menus = result.data;
      const grid = document.getElementById('menuGrid');
      grid.innerHTML = '';
      for (const menu of menus) {
        const card = document.createElement('div');
        card.className = 'card bg-white rounded-lg shadow-md overflow-hidden';
        card.innerHTML = `
          <div class="p-6">
            <div class="flex justify-between items-start mb-4">
              <h3 class="text-lg font-semibold text-gray-900">${menu.name}</h3>
              <span class="px-2 py-1 text-xs font-semibold rounded-full ${menu.available?'bg-green-100 text-green-800':'bg-red-100 text-red-800'}">${menu.available?'‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ç‡∏≤‡∏¢':'‡∏´‡∏°‡∏î'}</span>
            </div>
            <p class="text-sm text-gray-600 mb-2">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà: ${menu.category}</p>
            <p class="text-xl font-bold text-orange-600 mb-4">${formatBaht(menu.price)}</p>
            <div class="flex space-x-2">
              <button data-action="edit" data-id="${menu.id}" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded text-sm transition-colors">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
              <button data-action="delete" data-id="${menu.id}" class="flex-1 bg-red-600 hover:bg-red-700 text-white px-3 py-2 rounded text-sm transition-colors">‡∏•‡∏ö</button>
            </div>
          </div>`;
        grid.appendChild(card);
      }
      grid.addEventListener('click', (e) => {
        const btn = e.target.closest('button[data-action]');
        if (!btn) return;
        const id = Number(btn.dataset.id);
        const action = btn.dataset.action;
        if (action === 'edit') Swal.fire('‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏°‡∏ô‡∏π', '‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤', 'info');
        if (action === 'delete') Swal.fire('‡∏•‡∏ö‡πÄ‡∏°‡∏ô‡∏π', '‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤', 'info');
      }, { once: true });
    }

    // ===== Inventory =====
    async function loadInventory() {
      const result = await GoogleSheetsAPI.getInventory();
      if (!result.success) return;
      inventory = result.data;
      const tbody = document.getElementById('inventoryTableBody');
      tbody.innerHTML = '';
      for (const item of inventory) {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${item.name}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${item.unit}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${item.current}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${item.minimum}</td>
          <td class="px-6 py-4 whitespace-nowrap">${item.status==='low' ? '<span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥</span>' : '<span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">‡∏õ‡∏Å‡∏ï‡∏¥</span>'}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
            <button class="text-blue-600 hover:text-blue-900 mr-3" data-action="edit" data-id="${item.id}">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
            <button class="text-red-600 hover:text-red-900" data-action="delete" data-id="${item.id}">‡∏•‡∏ö</button>
          </td>`;
        tbody.appendChild(tr);
      }
      tbody.addEventListener('click', (e) => {
        const btn = e.target.closest('button[data-action]');
        if (!btn) return;
        const action = btn.dataset.action;
        if (action === 'edit') Swal.fire('‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏ï‡πá‡∏≠‡∏Å', '‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤', 'info');
        if (action === 'delete') Swal.fire('‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£', '‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤', 'info');
      }, { once: true });
    }

    // ===== POS =====
    async function loadPOS() {
      const result = await GoogleSheetsAPI.getMenus();
      if (!result.success) return;
      menus = result.data;
      renderPOSMenus(menus);
      setupCategoryFilters();
      setupPOSEvents();
    }

    function renderPOSMenus(menusData) {
      const grid = document.getElementById('posMenuGrid');
      grid.innerHTML = '';
      const filtered = selectedCategory === 'all' ? menusData : menusData.filter((m) => m.category === selectedCategory);
      for (const menu of filtered) {
        if (!menu.available) continue;
        const card = document.createElement('div');
        card.className = 'bg-white rounded-lg shadow-md p-4 cursor-pointer hover:shadow-lg transition-shadow border-2 border-transparent hover:border-orange-300';
        card.innerHTML = `<div class="text-center"><div class="text-4xl mb-2">${menu.image || 'üçΩÔ∏è'}</div><h3 class="font-semibold text-gray-900 mb-1">${menu.name}</h3><p class="text-sm text-gray-600 mb-2">${menu.category}</p><p class="text-lg font-bold text-orange-600">${formatBaht(menu.price)}</p></div>`;
        card.addEventListener('click', () => addToOrder(menu));
        grid.appendChild(card);
      }
    }

    function setupCategoryFilters() {
      document.querySelectorAll('.category-btn').forEach((btn) => {
        btn.addEventListener('click', function() {
          document.querySelectorAll('.category-btn').forEach((b) => { b.classList.remove('bg-orange-600','text-white'); b.classList.add('bg-gray-200','text-gray-700'); });
          this.classList.remove('bg-gray-200','text-gray-700'); this.classList.add('bg-orange-600','text-white');
          selectedCategory = this.dataset.category; renderPOSMenus(menus);
        }, { once: true });
      });
    }

    function addToOrder(menu) {
      const found = currentOrder.find((i) => i.id === menu.id);
      if (found) found.quantity += 1; else currentOrder.push({ ...menu, quantity: 1 });
      updateOrderDisplay();
    }

    function updateOrderDisplay() {
      const container = document.getElementById('orderItems');
      const totalItemsEl = document.getElementById('totalItems');
      const totalAmountEl = document.getElementById('totalAmount');
      const submitBtn = document.getElementById('submitOrderBtn');

      if (currentOrder.length === 0) {
        container.innerHTML = '<div class="text-center text-gray-500 py-8"><span class="text-4xl mb-2 block">üõí</span><p class="text-sm">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</p></div>';
        totalItemsEl.textContent = '0'; totalAmountEl.textContent = formatBaht(0); submitBtn.disabled = true; updatePaymentCalculation(); return;
      }
      container.innerHTML = '';
      let totalItems = 0, totalAmount = 0;
      for (const item of currentOrder) {
        totalItems += item.quantity; totalAmount += item.price * item.quantity;
        const row = document.createElement('div');
        row.className = 'flex items-center justify-between p-3 bg-gray-50 rounded-lg';
        row.innerHTML = `
          <div class="flex-1"><h4 class="font-medium text-sm">${item.name}</h4><p class="text-xs text-gray-600">${formatBaht(item.price)} x ${item.quantity}</p></div>
          <div class="flex items-center space-x-2">
            <button class="w-6 h-6 bg-red-500 text-white rounded-full text-xs hover:bg-red-600" aria-label="‡∏•‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô" data-action="dec" data-id="${item.id}">-</button>
            <span class="text-sm font-medium w-6 text-center">${item.quantity}</span>
            <button class="w-6 h-6 bg-green-500 text-white rounded-full text-xs hover:bg-green-600" aria-label="‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô" data-action="inc" data-id="${item.id}">+</button>
          </div>`;
        container.appendChild(row);
      }
      totalItemsEl.textContent = totalItems;
      totalAmountEl.textContent = formatBaht(totalAmount);
      submitBtn.disabled = false;
      updatePaymentCalculation();

      // Delegate +/- buttons
      container.onclick = (e) => {
        const btn = e.target.closest('button[data-action]');
        if (!btn) return;
        const id = Number(btn.dataset.id);
        const idx = currentOrder.findIndex((i) => i.id === id);
        if (idx === -1) return;
        if (btn.dataset.action === 'inc') currentOrder[idx].quantity += 1;
        if (btn.dataset.action === 'dec') currentOrder[idx].quantity -= 1;
        if (currentOrder[idx].quantity <= 0) currentOrder.splice(idx, 1);
        updateOrderDisplay();
      };
    }

    function updatePaymentCalculation() {
      const total = currentOrder.reduce((sum, i) => sum + i.price * i.quantity, 0);
      const cash = parseFloat(document.getElementById('cashAmount').value) || 0;
      const change = cash - total;
      document.getElementById('paymentTotal').textContent = formatBaht(total);
      document.getElementById('cashReceived').textContent = formatBaht(cash);
      const changeEl = document.getElementById('changeAmount');
      changeEl.textContent = formatBaht(Math.abs(change));
      changeEl.className = `font-bold ${change >= 0 ? 'text-green-600' : 'text-red-600'}`;
    }

    function togglePaymentSection() {
      const method = document.querySelector('input[name="paymentMethod"]:checked').value;
      document.getElementById('cashPaymentSection').style.display = method === 'cash' ? 'block' : 'none';
    }

    function setupPOSEvents() {
      document.querySelectorAll('input[name="paymentMethod"]').forEach((r) => r.addEventListener('change', togglePaymentSection, { once: true }));
      document.getElementById('cashAmount').addEventListener('input', updatePaymentCalculation, { once: true });
      document.getElementById('clearOrderBtn').addEventListener('click', () => {
        if (currentOrder.length === 0) return;
        Swal.fire({ title: '‡∏•‡πâ‡∏≤‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå?', text: '‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?', icon: 'question', showCancelButton: true, confirmButtonColor: '#d33', cancelButtonColor: '#3085d6', confirmButtonText: '‡∏•‡πâ‡∏≤‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå', cancelButtonText: '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å' }).then((res) => {
          if (res.isConfirmed) {
            currentOrder = []; updateOrderDisplay();
            document.getElementById('customerName').value = '';
            document.getElementById('cashAmount').value = '';
            document.querySelector('input[name="paymentMethod"][value="cash"]').checked = true; togglePaymentSection();
            Swal.fire({ icon:'success', title:'‡∏•‡πâ‡∏≤‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÅ‡∏•‡πâ‡∏ß', timer:1500, showConfirmButton:false });
          }
        });
      }, { once: true });

      document.getElementById('submitOrderBtn').addEventListener('click', async () => {
        if (currentOrder.length === 0) return;
        const customerName = document.getElementById('customerName').value || '‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ';
        const paymentMethod = document.querySelector('input[name="paymentMethod"]:checked').value;
        const paymentMethodText = paymentMethod === 'cash' ? '‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î' : '‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô';
        const totalAmount = currentOrder.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        if (paymentMethod === 'cash') {
          const cashAmount = parseFloat(document.getElementById('cashAmount').value) || 0;
          if (cashAmount < totalAmount) {
            Swal.fire({ icon:'warning', title:'‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠', text: `‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö ${formatBaht(cashAmount)} ‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏¢‡∏≠‡∏î‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ä‡∏≥‡∏£‡∏∞ ${formatBaht(totalAmount)}` });
            return;
          }
        }
        const cashAmount = paymentMethod === 'cash' ? (parseFloat(document.getElementById('cashAmount').value) || 0) : 0;
        const changeAmount = paymentMethod === 'cash' ? (cashAmount - totalAmount) : 0;
        const orderData = { customer: customerName, items: currentOrder, total: totalAmount, paymentMethod, paymentMethodText, cashAmount, changeAmount, timestamp: new Date().toISOString() };
        const result = await GoogleSheetsAPI.addOrder(orderData);
        if (result.success) {
          let html = `<div class="text-left"><p><strong>‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤:</strong> ${customerName}</p><p><strong>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°:</strong> ${formatBaht(totalAmount)}</p><p><strong>‡∏ß‡∏¥‡∏ò‡∏µ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô:</strong> ${paymentMethodText}</p>`;
          if (paymentMethod === 'cash') html += `<p><strong>‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö:</strong> ${formatBaht(cashAmount)}</p><p><strong>‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏≠‡∏ô:</strong> <span class="text-green-600 font-bold">${formatBaht(changeAmount)}</span></p>`;
          html += '</div>';
          Swal.fire({ icon:'success', title:'‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', html, timer: 5000, showConfirmButton:false });
          currentOrder = []; updateOrderDisplay();
          document.getElementById('customerName').value = '';
          document.getElementById('cashAmount').value = '';
          document.querySelector('input[name="paymentMethod"][value="cash"]').checked = true; togglePaymentSection();
        } else {
          Swal.fire({ icon:'error', title:'‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', text:'‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÑ‡∏î‡πâ' });
        }
      }, { once: true });
    }

    // ===== Reports =====
    function loadReports() {
      const today = new Date(); const lastWeek = new Date(today.getTime() - 7*24*60*60*1000);
      document.getElementById('reportStartDate').value = lastWeek.toISOString().slice(0,10);
      document.getElementById('reportEndDate').value = today.toISOString().slice(0,10);
      document.getElementById('generateReportBtn').addEventListener('click', () => Swal.fire('‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ', '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤', 'info'), { once: true });
    }

    // ===== Global UI Hooks =====
    document.getElementById('logoutBtn').addEventListener('click', () => {
      Swal.fire({ title:'‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö?', text:'‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?', icon:'question', showCancelButton:true, confirmButtonColor:'#d33', cancelButtonColor:'#3085d6', confirmButtonText:'‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö', cancelButtonText:'‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å' }).then((res) => {
        if (res.isConfirmed) {
          currentUser = null; currentRole = null;
          document.getElementById('mainApp').classList.add('hidden');
          document.getElementById('loginPage').classList.remove('hidden');
          document.getElementById('username').value = '';
          document.getElementById('password').value = '';
          document.getElementById('username').focus();
        }
      });
    });

    document.getElementById('mobileMenuBtn').addEventListener('click', () => {
      const sidebar = document.getElementById('sidebar');
      const expanded = sidebar.classList.toggle('-translate-x-full');
      document.getElementById('mobileMenuBtn').setAttribute('aria-expanded', String(!expanded));
    });

    document.getElementById('refreshOrdersBtn').addEventListener('click', loadOrders, { once: true });
    document.getElementById('addOrderBtn').addEventListener('click', () => Swal.fire('‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ', '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤', 'info'), { once: true });
    document.getElementById('addMenuBtn').addEventListener('click', () => Swal.fire('‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ', '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤', 'info'), { once: true });
    document.getElementById('addInventoryBtn').addEventListener('click', () => Swal.fire('‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ', '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤', 'info'), { once: true });

    // ===== Init =====
    document.addEventListener('DOMContentLoaded', () => { document.getElementById('username').focus(); });
  </script>
</body>
</html>
